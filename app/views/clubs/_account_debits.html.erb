<table class="datagrid">
	<thead class="datagrid">
		<th>Item</th>
		<th>Category</th>
		<th>Purchased</th>
		<th>Amount</th>
		<th>Status</th>
	</thead>
<% @account_debits.each do |debit| %>
  <tr class="<%= cycle('dg_list_line_odd', 'dg_list_line_even') %>">
	<td><%= link_to debit.item_purchased, debit_path(debit) %></td>
	<td><%= debit.debit_category.category %></td>
    <td><%= debit.date_purchased.strftime("%d.%m.%Y")%></td>
    <td>
		<% if debit.amount > 250 %>
			$<%= debit.amount.to_s + "*"%>
		<% else %> 
			$<%= debit.amount %>
		<% end %>
	</td>
	<td>
		<% if debit.status.eql?("unclaimed") %>
			<% if can? :claim, debit %>
				<%= link_to "Claim", :controller=>"debits", :action=>:claim, :id=>debit.id %>
			<% else %>
				<%= debit.status %>
			<% end %>
		<% elsif debit.status.eql?("processing") %>
			<% if can? :process_me, debit %>
				<%= link_to "Process", :controller=>"debits", :action=>:process_me, :id=>debit.id %>
			<% else %>
				<%= debit.status %>
			<% end %>
		<% elsif debit.status.eql?("ready") %>
			<% if can? :reimburse, debit %>
				<%= link_to(image_tag("reimburse_dg.png", :border => 0), :controller => "debits", :action => :reimburse, :id => debit.id)%>
			<% else %>
				<%= debit.status %>
			<% end %>
		<% else %>
			<%= debit.reimbursement_date.strftime("%d.%m.%Y") %>
		<% end %>
	</td>
	<% if can? :update, debit %>
		<td align="center"><%= link_to(image_tag("edit_dg.png", :border => 0), edit_debit_path(debit))%></td>
	<% end %>
	<% if can? :delete, debit %>
		<td align="center"><%= link_to(image_tag("delete_dg.png", :border => 0), debit_path(debit), :confirm => 'delete?', :method => :delete) %></td>
	<% end %>
  </tr>
<% end %>
</table>

<span class="smtext">
	<%= will_paginate @account_debits, :previous_label => "Previous&nbsp;", :next_label => "&nbsp;Next" %>
</span>